{"mappings":"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","sources":["<anon>","script.js","bird.js","pipe.js"],"sourcesContent":["const $413c50a51b26ee83$var$birdElement = document.querySelector(\"[data-bird]\");\nconst $413c50a51b26ee83$var$BIRD_SPEED = 0.5;\nconst $413c50a51b26ee83$var$JUMP_DURATION = 125;\nlet $413c50a51b26ee83$var$timeSinceLastJump = Number.POSITIVE_INFINITY;\nfunction $413c50a51b26ee83$export$7ef1b87e1c638677() {\n    $413c50a51b26ee83$var$setTop(window.innerHeight / 2);\n    document.removeEventListener(\"keydown\", $413c50a51b26ee83$var$handleJump);\n    document.addEventListener(\"keydown\", $413c50a51b26ee83$var$handleJump);\n}\nfunction $413c50a51b26ee83$export$59abbf5e25fceeb1(delta) {\n    if ($413c50a51b26ee83$var$timeSinceLastJump < $413c50a51b26ee83$var$JUMP_DURATION) $413c50a51b26ee83$var$setTop($413c50a51b26ee83$var$getTop() - $413c50a51b26ee83$var$BIRD_SPEED * delta);\n    else $413c50a51b26ee83$var$setTop($413c50a51b26ee83$var$getTop() + $413c50a51b26ee83$var$BIRD_SPEED * delta);\n    $413c50a51b26ee83$var$timeSinceLastJump += delta;\n}\nfunction $413c50a51b26ee83$export$207dba8a4f448a02() {\n    return $413c50a51b26ee83$var$birdElement.getBoundingClientRect();\n}\nfunction $413c50a51b26ee83$var$setTop(top) {\n    $413c50a51b26ee83$var$birdElement.style.setProperty(\"--bird-top\", top);\n}\nfunction $413c50a51b26ee83$var$getTop() {\n    return parseFloat(getComputedStyle($413c50a51b26ee83$var$birdElement).getPropertyValue(\"--bird-top\"));\n}\nfunction $413c50a51b26ee83$var$handleJump(e) {\n    if (e.code !== \"Space\") return;\n    $413c50a51b26ee83$var$timeSinceLastJump = 0;\n}\n\n\nconst $9fd44604781a14ce$var$HOLE_HEIGHT = 180;\nconst $9fd44604781a14ce$var$PIPE_WIDTH = 120;\nconst $9fd44604781a14ce$var$PIPE_INTERVAL = 1500;\nlet $9fd44604781a14ce$var$pipes = [];\nconst $9fd44604781a14ce$var$PIPE_SPEED = 0.75;\nlet $9fd44604781a14ce$var$timeSinceLastPipe;\nlet $9fd44604781a14ce$var$passPipeCount;\nfunction $9fd44604781a14ce$export$dcea0cff461fd58d() {\n    document.documentElement.style.setProperty(\"--pipe-width\", $9fd44604781a14ce$var$PIPE_WIDTH);\n    document.documentElement.style.setProperty(\"--hole-height\", $9fd44604781a14ce$var$HOLE_HEIGHT);\n    $9fd44604781a14ce$var$pipes.forEach((pipe)=>pipe.remove());\n    $9fd44604781a14ce$var$timeSinceLastPipe = $9fd44604781a14ce$var$PIPE_INTERVAL;\n    $9fd44604781a14ce$var$passPipeCount = 0;\n}\nfunction $9fd44604781a14ce$export$63e7f179958aacab(delta) {\n    $9fd44604781a14ce$var$timeSinceLastPipe += delta;\n    if ($9fd44604781a14ce$var$timeSinceLastPipe > $9fd44604781a14ce$var$PIPE_INTERVAL) {\n        $9fd44604781a14ce$var$timeSinceLastPipe -= $9fd44604781a14ce$var$PIPE_INTERVAL;\n        $9fd44604781a14ce$var$createPipe();\n    }\n    $9fd44604781a14ce$var$pipes.forEach((pipe)=>{\n        if (pipe.left + $9fd44604781a14ce$var$PIPE_WIDTH < 0) {\n            $9fd44604781a14ce$var$passPipeCount++;\n            return pipe.remove();\n        }\n        pipe.left = pipe.left - delta * $9fd44604781a14ce$var$PIPE_SPEED;\n    });\n}\nfunction $9fd44604781a14ce$export$232a292ada0dc31d() {\n    return $9fd44604781a14ce$var$passPipeCount;\n}\nfunction $9fd44604781a14ce$export$eb1e8c6205b52664() {\n    return $9fd44604781a14ce$var$pipes.flatMap((pipe)=>pipe.rects());\n}\nfunction $9fd44604781a14ce$var$createPipe() {\n    const pipeElement = document.createElement(\"div\");\n    const topElem = $9fd44604781a14ce$var$createPipeSegment(\"top\");\n    const bottomElem = $9fd44604781a14ce$var$createPipeSegment(\"bottom\");\n    pipeElement.append(topElem);\n    pipeElement.append(bottomElem);\n    pipeElement.classList.add(\"pipe\");\n    pipeElement.style.setProperty(\"--hole-top\", $9fd44604781a14ce$var$randomNumberBetween($9fd44604781a14ce$var$HOLE_HEIGHT * 1.5, window.innerHeight - $9fd44604781a14ce$var$HOLE_HEIGHT * 0.5));\n    const pipe = {\n        get left () {\n            return parseFloat(getComputedStyle(pipeElement).getPropertyValue(\"--pipe-left\"));\n        },\n        set left (value){\n            pipeElement.style.setProperty(\"--pipe-left\", value);\n        },\n        remove () {\n            $9fd44604781a14ce$var$pipes = $9fd44604781a14ce$var$pipes.filter((p)=>p !== pipe);\n            pipeElement.remove();\n        },\n        rects () {\n            return [\n                topElem.getBoundingClientRect(),\n                bottomElem.getBoundingClientRect()\n            ];\n        }\n    };\n    pipe.left = window.innerWidth;\n    document.body.append(pipeElement);\n    $9fd44604781a14ce$var$pipes.push(pipe);\n}\nfunction $9fd44604781a14ce$var$createPipeSegment(position) {\n    const segement = document.createElement(\"div\");\n    segement.classList.add(\"segment\", position);\n    return segement;\n}\nfunction $9fd44604781a14ce$var$randomNumberBetween(min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n\ndocument.addEventListener(\"keypress\", $c1ce9d969bfa6909$var$handleStart, {\n    once: true\n});\nconst $c1ce9d969bfa6909$var$title = document.querySelector(\"[data-title]\");\nconst $c1ce9d969bfa6909$var$subtitle = document.querySelector(\"[data-subtitle]\");\nlet $c1ce9d969bfa6909$var$lastTime;\nfunction $c1ce9d969bfa6909$var$updateLoop(time) {\n    if ($c1ce9d969bfa6909$var$lastTime == null) {\n        $c1ce9d969bfa6909$var$lastTime = time;\n        window.requestAnimationFrame($c1ce9d969bfa6909$var$updateLoop);\n        return;\n    }\n    const delta = time - $c1ce9d969bfa6909$var$lastTime;\n    (0, $413c50a51b26ee83$export$59abbf5e25fceeb1)(delta);\n    (0, $9fd44604781a14ce$export$63e7f179958aacab)(delta);\n    if ($c1ce9d969bfa6909$var$checkLose()) return $c1ce9d969bfa6909$var$handleLose();\n    $c1ce9d969bfa6909$var$lastTime = time;\n    window.requestAnimationFrame($c1ce9d969bfa6909$var$updateLoop);\n}\nfunction $c1ce9d969bfa6909$var$checkLose() {\n    const birdRect = (0, $413c50a51b26ee83$export$207dba8a4f448a02)();\n    const insidePipe = (0, $9fd44604781a14ce$export$eb1e8c6205b52664)().some((rect)=>$c1ce9d969bfa6909$var$isCollision(birdRect, rect));\n    const outsideWorld = birdRect.top < 0 || birdRect.bottom > window.innerHeight;\n    return outsideWorld || insidePipe;\n}\nfunction $c1ce9d969bfa6909$var$isCollision(rect1, rect2) {\n    return rect1.left < rect2.right && rect1.top < rect2.bottom && rect1.right > rect2.left && rect1.bottom > rect2.top;\n}\nfunction $c1ce9d969bfa6909$var$handleStart() {\n    $c1ce9d969bfa6909$var$title.classList.add(\"hide\");\n    (0, $413c50a51b26ee83$export$7ef1b87e1c638677)();\n    (0, $9fd44604781a14ce$export$dcea0cff461fd58d)();\n    $c1ce9d969bfa6909$var$lastTime = null;\n    window.requestAnimationFrame($c1ce9d969bfa6909$var$updateLoop);\n}\nfunction $c1ce9d969bfa6909$var$handleLose() {\n    setTimeout(()=>{\n        $c1ce9d969bfa6909$var$title.classList.remove(\"hide\");\n        $c1ce9d969bfa6909$var$subtitle.classList.remove(\"hide\");\n        $c1ce9d969bfa6909$var$subtitle.textContent = `${(0, $9fd44604781a14ce$export$232a292ada0dc31d)()} Pipes`;\n        document.addEventListener(\"keypress\", $c1ce9d969bfa6909$var$handleStart, {\n            once: true\n        });\n    }, 100);\n}\n\n\n//# sourceMappingURL=index.80097104.js.map\n","import { updateBird, setupBird, getBirdRect } from \"./bird.js\";\r\nimport {\r\n  updatePipes,\r\n  setupPipes,\r\n  getPassedPipeCount,\r\n  getPipeRects\r\n} from \"./pipe.js\";\r\n\r\ndocument.addEventListener(\"keypress\", handleStart, { once: true });\r\nconst title = document.querySelector(\"[data-title]\");\r\nconst subtitle = document.querySelector(\"[data-subtitle]\");\r\n\r\nlet lastTime;\r\nfunction updateLoop(time) {\r\n  if (lastTime == null) {\r\n    lastTime = time;\r\n    window.requestAnimationFrame(updateLoop);\r\n    return;\r\n  }\r\n  const delta = time - lastTime;\r\n  updateBird(delta);\r\n  updatePipes(delta);\r\n  if (checkLose()) return handleLose();\r\n  lastTime = time;\r\n  window.requestAnimationFrame(updateLoop);\r\n}\r\n\r\nfunction checkLose() {\r\n  const birdRect = getBirdRect();\r\n  const insidePipe = getPipeRects().some((rect) => isCollision(birdRect, rect));\r\n  const outsideWorld = birdRect.top < 0 || birdRect.bottom > window.innerHeight;\r\n\r\n  return outsideWorld || insidePipe;\r\n}\r\n\r\nfunction isCollision(rect1, rect2) {\r\n  return (\r\n    rect1.left < rect2.right &&\r\n    rect1.top < rect2.bottom &&\r\n    rect1.right > rect2.left &&\r\n    rect1.bottom > rect2.top\r\n  );\r\n}\r\n\r\nfunction handleStart() {\r\n  title.classList.add(\"hide\");\r\n  setupBird();\r\n  setupPipes();\r\n  lastTime = null;\r\n  window.requestAnimationFrame(updateLoop);\r\n}\r\n\r\nfunction handleLose() {\r\n  setTimeout(() => {\r\n    title.classList.remove(\"hide\");\r\n    subtitle.classList.remove(\"hide\");\r\n    subtitle.textContent = `${getPassedPipeCount()} Pipes`;\r\n    document.addEventListener(\"keypress\", handleStart, { once: true });\r\n  }, 100);\r\n}\r\n","const birdElement = document.querySelector(\"[data-bird]\");\r\nconst BIRD_SPEED = 0.5;\r\nconst JUMP_DURATION = 125;\r\nlet timeSinceLastJump = Number.POSITIVE_INFINITY;\r\n\r\nexport function setupBird() {\r\n  setTop(window.innerHeight / 2);\r\n  document.removeEventListener(\"keydown\", handleJump);\r\n  document.addEventListener(\"keydown\", handleJump);\r\n}\r\n\r\nexport function updateBird(delta) {\r\n  if (timeSinceLastJump < JUMP_DURATION) {\r\n    setTop(getTop() - BIRD_SPEED * delta);\r\n  } else {\r\n    setTop(getTop() + BIRD_SPEED * delta);\r\n  }\r\n  timeSinceLastJump += delta;\r\n}\r\n\r\nexport function getBirdRect(){\r\n  return birdElement.getBoundingClientRect()\r\n}\r\n\r\nfunction setTop(top) {\r\n  birdElement.style.setProperty(\"--bird-top\", top);\r\n}\r\n\r\nfunction getTop() {\r\n  return parseFloat(\r\n    getComputedStyle(birdElement).getPropertyValue(\"--bird-top\")\r\n  );\r\n}\r\n\r\nfunction handleJump(e) {\r\n  if (e.code !== \"Space\") return;\r\n\r\n  timeSinceLastJump = 0;\r\n}\r\n","const HOLE_HEIGHT = 180;\r\nconst PIPE_WIDTH = 120;\r\nconst PIPE_INTERVAL = 1500;\r\nlet pipes = [];\r\nconst PIPE_SPEED = 0.75;\r\nlet timeSinceLastPipe;\r\nlet passPipeCount;\r\n\r\nexport function setupPipes() {\r\n  document.documentElement.style.setProperty(\"--pipe-width\", PIPE_WIDTH);\r\n  document.documentElement.style.setProperty(\"--hole-height\", HOLE_HEIGHT);\r\n  pipes.forEach((pipe) => pipe.remove());\r\n  timeSinceLastPipe = PIPE_INTERVAL;\r\n  passPipeCount = 0;\r\n}\r\n\r\nexport function updatePipes(delta) {\r\n  timeSinceLastPipe += delta;\r\n\r\n  if (timeSinceLastPipe > PIPE_INTERVAL) {\r\n    timeSinceLastPipe -= PIPE_INTERVAL;\r\n    createPipe();\r\n  }\r\n\r\n  pipes.forEach((pipe) => {\r\n    if (pipe.left + PIPE_WIDTH < 0) {\r\n      passPipeCount++;\r\n      return pipe.remove();\r\n    }\r\n    pipe.left = pipe.left - delta * PIPE_SPEED;\r\n  });\r\n}\r\n\r\nexport function getPassedPipeCount() {\r\n  return passPipeCount;\r\n}\r\n\r\nexport function getPipeRects() {\r\n  return pipes.flatMap((pipe) => pipe.rects());\r\n}\r\n\r\nfunction createPipe() {\r\n  const pipeElement = document.createElement(\"div\");\r\n  const topElem = createPipeSegment(\"top\");\r\n  const bottomElem = createPipeSegment(\"bottom\");\r\n  pipeElement.append(topElem);\r\n  pipeElement.append(bottomElem);\r\n  pipeElement.classList.add(\"pipe\");\r\n  pipeElement.style.setProperty(\r\n    \"--hole-top\",\r\n    randomNumberBetween(\r\n      HOLE_HEIGHT * 1.5,\r\n      window.innerHeight - HOLE_HEIGHT * 0.5\r\n    )\r\n  );\r\n  const pipe = {\r\n    get left() {\r\n      return parseFloat(\r\n        getComputedStyle(pipeElement).getPropertyValue(\"--pipe-left\")\r\n      );\r\n    },\r\n    set left(value) {\r\n      pipeElement.style.setProperty(\"--pipe-left\", value);\r\n    },\r\n    remove() {\r\n      pipes = pipes.filter((p) => p !== pipe);\r\n      pipeElement.remove();\r\n    },\r\n    rects() {\r\n      return [\r\n        topElem.getBoundingClientRect(),\r\n        bottomElem.getBoundingClientRect()\r\n      ];\r\n    }\r\n  };\r\n  pipe.left = window.innerWidth;\r\n  document.body.append(pipeElement);\r\n  pipes.push(pipe);\r\n}\r\n\r\nfunction createPipeSegment(position) {\r\n  const segement = document.createElement(\"div\");\r\n  segement.classList.add(\"segment\", position);\r\n  return segement;\r\n}\r\n\r\nfunction randomNumberBetween(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n"],"names":["$9fd44604781a14ce$var$timeSinceLastPipe","$9fd44604781a14ce$var$passPipeCount","$c1ce9d969bfa6909$var$lastTime","$413c50a51b26ee83$var$birdElement","document","querySelector","$413c50a51b26ee83$var$timeSinceLastJump","Number","POSITIVE_INFINITY","$413c50a51b26ee83$var$setTop","top","style","setProperty","$413c50a51b26ee83$var$getTop","parseFloat","getComputedStyle","getPropertyValue","$413c50a51b26ee83$var$handleJump","e","code","$9fd44604781a14ce$var$pipes","$9fd44604781a14ce$var$createPipeSegment","position","segement","createElement","classList","add","addEventListener","$c1ce9d969bfa6909$var$handleStart","once","$c1ce9d969bfa6909$var$title","$c1ce9d969bfa6909$var$subtitle","$c1ce9d969bfa6909$var$updateLoop","time","window","requestAnimationFrame","delta","$413c50a51b26ee83$var$BIRD_SPEED","$9fd44604781a14ce$var$createPipe","pipeElement","topElem","bottomElem","append","Math","floor","random","max","innerHeight","$9fd44604781a14ce$var$HOLE_HEIGHT","pipe","left","value","remove","filter","p","rects","getBoundingClientRect","innerWidth","body","push","forEach","$c1ce9d969bfa6909$var$checkLose","birdRect","insidePipe","flatMap","some","rect","rect1","rect2","right","bottom","outsideWorld","setTimeout","textContent","removeEventListener","documentElement"],"version":3,"file":"index.80097104.js.map"}